<!DOCTYPE html>
<html lang="en">

<head>
    <title>序列号和反序列化</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="fabric.js"></script>
</head>

<body>
    <canvas id="c" width="800" height="800"></canvas>
    <script type="text/javascript">
    /*var canvas = new fabric.Canvas('c');
        console.log(JSON.stringify(canvas));*/


    // 先来看一个最简单的序列化的例子，在Javascript代码中声明一个画布，然后用JSON.stringify( )方法给生成JSON字符串
    /*var canvas = new fabric.Canvas('c');
    var rect = new fabric.Rect({
        width: 100,
        height: 100,
        fill: 'red'
    });
    canvas.add(rect);

    console.log(JSON.stringify(canvas.toJSON()));*/


    var canvas = new fabric.Canvas('c');
    var rect = new fabric.Rect({
        width: 100,
        height: 100,
        fill: 'red'
    });
    canvas.add(rect);
    console.log(canvas.toSVG());


    // 反序列化

    canvas.loadFromJSON('{"objects":[{"type":"rect","left":150,"top":150,"width":20,"height":20,"fill":"green","overlayFill":null,"stroke":null,"strokeWidth":1,"strokeDashArray":null,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"selectable":true,"hasControls":true,"hasBorders":true,"hasRotatingPoint":false,"transparentCorners":true,"perPixelTargetFind":false,"rx":0,"ry":0},{"type":"circle","left":100,"top":100,"width":100,"height":100,"fill":"red","overlayFill":null,"stroke":null,"strokeWidth":1,"strokeDashArray":null,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"selectable":true,"hasControls":true,"hasBorders":true,"hasRotatingPoint":false,"transparentCorners":true,"perPixelTargetFind":false,"radius":50}],"background":"rgba(0, 0, 0, 0)"}');
    </script>
</body>

</html>